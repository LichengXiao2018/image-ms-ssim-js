{"version":3,"sources":["image-ms-ssim.min.js","/source/image-ms-ssim.min.js"],"names":["f","exports","module","define","window","g","global","require","u","this","ImageMSSSIM","a","Error","n","call","l","i","s","t","code","o","r","length",1,"SSIM","IR","compare","image1","image2","windowSize","K1","K2","luminance","bitsPerComponent","WEIGHT","mssim","mcs","im1","im2","w","width","h","height","res","ssim","Math","floor","data","Uint8Array","channels","linear","msssim","pow","image-resize-linear","image-ssim",2,"ImageResizeLinear","from","to","fx","fy","fx0","fy0","rx","ry","rx1","ry1","p1","p2","p3","p4","w1","w2","w3","w4","sw","sh","lw","lh","ty","tx","c",3,"ImageSSIM","iteration","lumaValues1","lumaValues2","averageLumaValue1","averageLumaValue2","sigxy","sigsqx","sigsqy","numPixelsInWin","numerator","c1","c2","denominator","numWindows","L","Internals","_iterate","Channels","callback","y","x","windowWidth","min","windowHeight","_lumaValuesForWindow","averageLuma1","_averageLuma","averageLuma2","image","array","lumaValues","Float32Array","ArrayBuffer","counter","maxj","j","offset","maxi","sumLuma"],"mappings":"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","file":"image-ms-ssim.min.js","sourcesContent":["!function(e){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=e();else if(\"function\"==typeof define&&define.amd)define([],e);else{var n;n=\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:this,n.ImageMSSSIM=e()}}(function(){return function e(n,t,r){function i(o,h){if(!t[o]){if(!n[o]){var f=\"function\"==typeof require&&require;if(!h&&f)return f(o,!0);if(a)return a(o,!0);var s=new Error(\"Cannot find module '\"+o+\"'\");throw s.code=\"MODULE_NOT_FOUND\",s}var l=t[o]={exports:{}};n[o][0].call(l.exports,function(e){var t=n[o][1][e];return i(t?t:e)},l,l.exports,e,n,t,r)}return t[o].exports}for(var a=\"function\"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,n,t){var r,i=e(\"image-ssim\"),a=e(\"image-resize-linear\");!function(e){\"use strict\";function n(e,n,t,r,o,h,f){void 0===t&&(t=8),void 0===r&&(r=.01),void 0===o&&(o=.03),void 0===h&&(h=!0),void 0===f&&(f=8);var s=[.0448,.2856,.3001,.2363,.1333],l=[],d=[],c=[],u=[],v=e.width,w=e.height;c[0]=e,u[0]=n;for(var g=0;g<s.length;g++){var p=i.compare(c[g],u[g],t,r,o,h,f);l[g]=p.ssim,d[g]=p.mcs,g<s.length-1&&(v=Math.floor(v/2),w=Math.floor(w/2),c[g+1]={width:v,height:w,data:new Uint8Array(v*w*e.channels),channels:e.channels},u[g+1]={width:v,height:w,data:new Uint8Array(v*w*n.channels),channels:n.channels},a.linear(c[g],c[g+1]),a.linear(u[g],u[g+1]))}var m=l[s.length-1];for(g=0;g<s.length-1;g++)m*=Math.pow(d[g],s[g]);return{msssim:m,ssim:l[0]}}e.compare=n}(r||(r={})),n.exports=r},{\"image-resize-linear\":2,\"image-ssim\":3}],2:[function(e,n,t){var r;!function(e){\"use strict\";function n(e,n){for(var t,r,i,a,o,h,f,s,l,d,c,u,v,w,g,p,m=e.width<n.width?(e.width-1)/n.width:e.width/n.width,y=e.height<n.height?(e.height-1)/n.height:e.height/n.height,M=e.width*e.channels,x=e.width-1,A=e.height-1,G=0;G<n.height;G++)for(var b=0;b<n.width;b++){t=b*m,r=G*y,i=Math.floor(t),a=Math.floor(r),l=i*e.channels+a*M,d=l+(x>i?e.channels:0),c=l+(A>a?M:0),u=c+(x>i?e.channels:0),o=t-i,h=r-a,f=1-o,s=1-h,v=f*s,w=o*s,g=f*h,p=o*h;for(var B=0;B<e.channels;B++)n.data[(b+G*n.width)*e.channels+B]=v*e.data[l+B]+w*e.data[d+B]+g*e.data[c+B]+p*e.data[u+B]}}e.linear=n}(r||(r={})),n.exports=r},{}],3:[function(e,n,t){var r;!function(e){\"use strict\";function n(e,n,r,i,a,o,h){function f(e,n,t,r){var i,a,o;i=a=o=0;for(var h=0;h<e.length;h++)a+=Math.pow(e[h]-t,2),o+=Math.pow(n[h]-r,2),i+=(e[h]-t)*(n[h]-r);var f=e.length-1;a/=f,o/=f,i/=f;var s=(2*t*r+l)*(2*i+d),w=(Math.pow(t,2)+Math.pow(r,2)+l)*(a+o+d);u+=s/w,v+=(2*i+d)/(a+o+d),c++}if(void 0===r&&(r=8),void 0===i&&(i=.01),void 0===a&&(a=.03),void 0===o&&(o=!0),void 0===h&&(h=8),e.width!==n.width||e.height!==n.height)throw new Error(\"Images have different sizes!\");var s=(1<<h)-1,l=Math.pow(i*s,2),d=Math.pow(a*s,2),c=0,u=0,v=0;return t._iterate(e,n,r,o,f),{ssim:u/c,mcs:v/c}}!function(e){e[e.Grey=1]=\"Grey\",e[e.GreyAlpha=2]=\"GreyAlpha\",e[e.RGB=3]=\"RGB\",e[e.RGBAlpha=4]=\"RGBAlpha\"}(e.Channels||(e.Channels={}));e.Channels;e.compare=n;var t;!function(e){function n(e,n,i,a,o){for(var h=e.width,f=e.height,s=0;f>s;s+=i)for(var l=0;h>l;l+=i){var d=Math.min(i,h-l),c=Math.min(i,f-s),u=t(e,l,s,d,c,a),v=t(n,l,s,d,c,a),w=r(u),g=r(v);o(u,v,w,g)}}function t(e,n,t,r,i,a){for(var o=e.data,h=new Float32Array(new ArrayBuffer(r*i*4)),f=0,s=t+i,l=t;s>l;l++){var d=l*e.width,c=(d+n)*e.channels,u=(d+n+r)*e.channels;switch(e.channels){case 1:for(;u>c;)h[f++]=o[c++];break;case 2:for(;u>c;)h[f++]=o[c++]*(o[c++]/255);break;case 3:if(a)for(;u>c;)h[f++]=.212655*o[c++]+.715158*o[c++]+.072187*o[c++];else for(;u>c;)h[f++]=o[c++]+o[c++]+o[c++];break;case 4:if(a)for(;u>c;)h[f++]=(.212655*o[c++]+.715158*o[c++]+.072187*o[c++])*(o[c++]/255);else for(;u>c;)h[f++]=(o[c++]+o[c++]+o[c++])*(o[c++]/255)}}return h}function r(e){for(var n=0,t=0;t<e.length;t++)n+=e[t];return n/e.length}e._iterate=n}(t||(t={}))}(r||(r={})),n.exports=r},{}]},{},[1])(1)});\n//# sourceMappingURL=image-ms-ssim.min.js.map","!function(e){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=e();else if(\"function\"==typeof define&&define.amd)define([],e);else{var n;n=\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:this,n.MSSSIM=e()}}(function(){return function e(n,t,r){function i(o,h){if(!t[o]){if(!n[o]){var f=\"function\"==typeof require&&require;if(!h&&f)return f(o,!0);if(a)return a(o,!0);var s=new Error(\"Cannot find module '\"+o+\"'\");throw s.code=\"MODULE_NOT_FOUND\",s}var l=t[o]={exports:{}};n[o][0].call(l.exports,function(e){var t=n[o][1][e];return i(t?t:e)},l,l.exports,e,n,t,r)}return t[o].exports}for(var a=\"function\"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,n,t){var r,i=e(\"image-ssim\"),a=e(\"image-resize-linear\");!function(e){\"use strict\";function n(e,n,t,r,o,h,f){void 0===t&&(t=8),void 0===r&&(r=.01),void 0===o&&(o=.03),void 0===h&&(h=!0),void 0===f&&(f=8);var s=[.0448,.2856,.3001,.2363,.1333],l=[],d=[],c=[],u=[],v=e.width,w=e.height;c[0]=e,u[0]=n;for(var p=0;p<s.length;p++){var g=i.compare(c[p],u[p],t,r,o,h,f);l[p]=g.ssim,d[p]=g.mcs,p<s.length-1&&(v=Math.floor(v/2),w=Math.floor(w/2),c[p+1]={width:v,height:w,data:new Uint8Array(v*w*e.channels),channels:e.channels},u[p+1]={width:v,height:w,data:new Uint8Array(v*w*n.channels),channels:n.channels},a.linear(c[p],c[p+1]),a.linear(u[p],u[p+1]))}var m=l[s.length-1];for(p=0;p<s.length-1;p++)m*=Math.pow(d[p],s[p]);return{msssim:m,ssim:l[0]}}e.compare=n}(r||(r={})),n.exports=r},{\"image-resize-linear\":2,\"image-ssim\":3}],2:[function(e,n,t){var r;!function(e){\"use strict\";function n(e,n){for(var t,r,i,a,o,h,f,s,l,d,c,u,v,w,p,g,m=e.width<n.width?(e.width-1)/n.width:e.width/n.width,y=e.height<n.height?(e.height-1)/n.height:e.height/n.height,M=e.width*e.channels,x=e.width-1,A=e.height-1,G=0;G<n.height;G++)for(var b=0;b<n.width;b++){t=b*m,r=G*y,i=Math.floor(t),a=Math.floor(r),l=i*e.channels+a*M,d=l+(x>i?e.channels:0),c=l+(A>a?M:0),u=c+(x>i?e.channels:0),o=t-i,h=r-a,f=1-o,s=1-h,v=f*s,w=o*s,p=f*h,g=o*h;for(var B=0;B<e.channels;B++)n.data[(b+G*n.width)*e.channels+B]=v*e.data[l+B]+w*e.data[d+B]+p*e.data[c+B]+g*e.data[u+B]}}e.linear=n}(r||(r={})),n.exports=r},{}],3:[function(e,n,t){var r;!function(e){\"use strict\";function n(e,n,r,i,a,o,h){function f(e,n,t,r){var i,a,o;i=a=o=0;for(var h=0;h<e.length;h++)a+=Math.pow(e[h]-t,2),o+=Math.pow(n[h]-r,2),i+=(e[h]-t)*(n[h]-r);var f=e.length-1;a/=f,o/=f,i/=f;var s=(2*t*r+l)*(2*i+d),w=(Math.pow(t,2)+Math.pow(r,2)+l)*(a+o+d);u+=s/w,v+=(2*i+d)/(a+o+d),c++}if(void 0===r&&(r=8),void 0===i&&(i=.01),void 0===a&&(a=.03),void 0===o&&(o=!0),void 0===h&&(h=8),e.width!==n.width||e.height!==n.height)throw new Error(\"Images have different sizes!\");var s=(1<<h)-1,l=Math.pow(i*s,2),d=Math.pow(a*s,2),c=0,u=0,v=0;return t._iterate(e,n,r,o,f),{ssim:u/c,mcs:v/c}}!function(e){e[e.Grey=1]=\"Grey\",e[e.GreyAlpha=2]=\"GreyAlpha\",e[e.RGB=3]=\"RGB\",e[e.RGBAlpha=4]=\"RGBAlpha\"}(e.Channels||(e.Channels={}));e.Channels;e.compare=n;var t;!function(e){function n(e,n,i,a,o){for(var h=e.width,f=e.height,s=0;f>s;s+=i)for(var l=0;h>l;l+=i){var d=Math.min(i,h-l),c=Math.min(i,f-s),u=t(e,l,s,d,c,a),v=t(n,l,s,d,c,a),w=r(u),p=r(v);o(u,v,w,p)}}function t(e,n,t,r,i,a){for(var o=e.data,h=new Float32Array(new ArrayBuffer(r*i*4)),f=0,s=t+i,l=t;s>l;l++){var d=l*e.width,c=(d+n)*e.channels,u=(d+n+r)*e.channels;switch(e.channels){case 1:for(;u>c;)h[f++]=o[c++];break;case 2:for(;u>c;)h[f++]=o[c++]*(o[c++]/255);break;case 3:if(a)for(;u>c;)h[f++]=.212655*o[c++]+.715158*o[c++]+.072187*o[c++];else for(;u>c;)h[f++]=o[c++]+o[c++]+o[c++];break;case 4:if(a)for(;u>c;)h[f++]=(.212655*o[c++]+.715158*o[c++]+.072187*o[c++])*(o[c++]/255);else for(;u>c;)h[f++]=(o[c++]+o[c++]+o[c++])*(o[c++]/255)}}return h}function r(e){for(var n=0,t=0;t<e.length;t++)n+=e[t];return n/e.length}e._iterate=n}(t||(t={}))}(r||(r={})),n.exports=r},{}]},{},[1])(1)});\n//# sourceMappingURL=image-ms-ssim.min.js.map"],"sourceRoot":"/source/"}